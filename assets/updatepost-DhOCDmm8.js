import{_ as w}from"./PostSort-C8CHrn04.js";import{H as y,i as d,r as b,o as v,e as A,w as l,u as t,b as e,a as V,N as x,M as B}from"./index-Csy_03Ik.js";import{b as j,d as k,a as r,V as N}from"./VCard-Dn6rlqdV.js";import{V as f}from"./VTextField-C2KP5el_.js";import{V as U}from"./VTextarea-CQUp357K.js";import"./PostModal-DYxFwaA8.js";import"./Reply-DcX9_dpw.js";import"./avatar-1-BeeGmpGQ.js";import"./VSpacer-B8EKNrvY.js";import"./index-Duozb8DO.js";import"./VImg-AgknyUsB.js";import"./VGrid-CkWBtd8r.js";import"./VDivider-COcjAoGG.js";import"./dialog-transition-BELgG3Ok.js";import"./axios-DkDr-_XN.js";import"./VTable-CVQIvV2I.js";import"./VInput-D2rLtPSR.js";const z=V("p",null,"Post 수정",-1),X={__name:"updatepost",props:{id:String},setup(h){const T=y();d("serverAddress");const i=d("auth"),p=d("postAddress"),g=d("userAddress");async function c(){const n=await fetch(`http://${g}/api/getuserid`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},credentials:"include"});if(!n.ok)alert("인증에 실패하였습니다.");else return n.json()}const a=b({postTitle:"",postContent:"",tag:""}),m=h;async function $(n){const o=await c(),s=await fetch(`http://${p}/api/post/read/${n}/${o}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},credentials:"include"}),u=await fetch(`http://${p}/api/tagpost/read/${n}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},credentials:"include"});!s.ok||!u.ok?alert("실패!"):(a.value=await s.json(),a.value.tag=await u.text())}const C=m.id;$(C);async function _(n){const o=await c(),s={postTitle:a.value.postTitle,postContent:a.value.postContent,tag:a.value.tag};(await fetch(`http://${p}/api/post/update/${n}/${o}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(s),credentials:"include"})).ok?T.go(-1):alert("실패!")}return(n,o)=>(v(),A(t(N),null,{default:l(()=>[e(t(r),{cols:"12",md:"8",class:"mb-4"},{default:l(()=>[e(j,{class:"position-relative"},{default:l(()=>[e(k,null,{default:l(()=>[V("div",null,[z,e(t(r),null,{default:l(()=>[e(t(f),{id:"title",modelValue:t(a).postTitle,"onUpdate:modelValue":o[0]||(o[0]=s=>t(a).postTitle=s),placeholder:"제목",label:"제목"},null,8,["modelValue"])]),_:1}),e(t(r),null,{default:l(()=>[e(U,{id:"content",modelValue:t(a).postContent,"onUpdate:modelValue":o[1]||(o[1]=s=>t(a).postContent=s),placeholder:"본문",label:"본문"},null,8,["modelValue"])]),_:1}),e(t(r),null,{default:l(()=>[e(t(f),{id:"tag",modelValue:t(a).tag,"onUpdate:modelValue":o[2]||(o[2]=s=>t(a).tag=s),placeholder:"태그",label:"태그"},null,8,["modelValue"])]),_:1}),e(t(r),{cols:"12"},{default:l(()=>[e(x,{onClick:o[3]||(o[3]=s=>_(m.id)),type:"submit",class:"me-5"},{default:l(()=>[B(" Submit ")]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),e(t(r),{cols:"12",md:"4"},{default:l(()=>[e(w)]),_:1})]),_:1}))}};export{X as default};
