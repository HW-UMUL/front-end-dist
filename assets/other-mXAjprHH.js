import{_ as de}from"./Post-C260Llot.js";import{_ as ce,i as g,H as ae,r as n,l as J,o as d,e as le,w as b,a as e,b as _,M as X,I as Y,O as Z,c as p,F as T,L as W,t as w,n as B,u as r,P,Q as pe,R as ve,a6 as he,G as fe,h as ee}from"./index-Csy_03Ik.js";import{_ as ge}from"./GetName-ChMEjk5Y.js";import{a as te}from"./axios-DkDr-_XN.js";import{c as _e,b as me,V as O,a as se}from"./VCard-Dn6rlqdV.js";import{a as ke}from"./avatar-1-BeeGmpGQ.js";import"./PostModal-DYxFwaA8.js";import"./Reply-DcX9_dpw.js";import"./VSpacer-B8EKNrvY.js";import"./index-Duozb8DO.js";import"./VImg-AgknyUsB.js";import"./VGrid-CkWBtd8r.js";import"./VDivider-COcjAoGG.js";import"./dialog-transition-BELgG3Ok.js";import"./VTextarea-CQUp357K.js";import"./VInput-D2rLtPSR.js";const v=m=>(pe("data-v-d94231f4"),m=m(),ve(),m),we={style:{"margin-bottom":"20px"}},ye=v(()=>e("option",{value:"5",selected:""}," 5개씩 보기 ",-1)),$e=v(()=>e("option",{value:"10"},"10개씩 보기",-1)),be=v(()=>e("option",{value:"20"},"20개씩 보기",-1)),Ie=[ye,$e,be],Ce=v(()=>e("option",{value:"",selected:""}," 카테고리 선택 ",-1)),xe=["value"],Ae=v(()=>e("br",null,null,-1)),Be=v(()=>e("br",null,null,-1)),Pe={class:"wikititle",border:"0",style:{"border-spacing":"5px",width:"100%","max-height":"300px","overflow-y":"auto"}},Te=v(()=>e("tr",{style:{"font-weight":"bold"}},[e("td",{width:"10%",style:{"padding-left":"10px"}}," 번호 "),e("td",{style:{"padding-left":"10px"},width:"55%"}," 제목 "),e("td",{align:"center",width:"10%"}," 사용자 "),e("td",{align:"center",width:"25%"}," 작성일 ")],-1)),Le=v(()=>e("tr",null,[e("td",{colspan:"6"},[e("hr")])],-1)),Se={height:"40"},Ve={style:{"padding-left":"20px"},width:"10%"},je={width:"50%"},Me=["onClick"],ze={width:"20%",align:"center"},Ne={width:"20%",align:"center"},We=v(()=>e("tr",null,[e("td",{colspan:"4"},[e("hr")])],-1)),De=v(()=>e("br",null,null,-1)),Ee={style:{display:"flex",gap:"5px","justify-content":"center"}},Fe={class:"pagination"},Ge=["onClick"],Oe={__name:"OtherWikiList",props:{userId:String},setup(m){g("serverAddress");const L=g("wikiAddress"),D=g("userAddress"),S=g("auth"),V=m;async function I(){const s=await fetch(`http://${D}/api/getuserid`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},credentials:"include"});if(!s.ok)alert("인증에 실패하였습니다.");else return s.json()}let k="Bearer ";k=k+S;const j=ae(),C=n([]),c=n([]),h=n([]),i=n([]),l=n("10");let o=n(0),M=10;const x=n([]);let u=n(0),U=n(!0),R=n(!0),H=n(!0),K=n(!0);const z=()=>Math.floor(o.value/M)*M,oe=()=>{x.value=[],i.value.length%l.value==0?u.value=i.value.length/l.value-1:u.value=Math.ceil(i.value.length/l.value)-1;let s=z();for(let t=0;t<M;t++)u.value>=s&&(x.value.push(s),s++)},ie=()=>{x.value=[],i.value.length%l.value==0?u.value=i.value.length/l.value-1:u.value=Math.ceil(c.value.length/l.value)-1;let s=z();for(let t=0;t<M;t++)u.value>=s&&(x.value.push(s),s++)},E=async()=>{var s;try{const t=await I(),a=await te.get(`http://${L}/api/wiki/read/user/${V.userId}/1`,{headers:{Authorization:k}});i.value=a.data,h.value=a.data,c.value=[],C.value=[];const f=l.value*o.value,G=Math.min(f+l.value,i.value.length),q=[];for(let $=f;$<G;$++){const ue=await te.get(`http://${L}/api/wikilog/readall/${i.value[$].wikiId}/${t}`,{headers:{Authorization:k},withCredentials:!0});q.push((s=ue.data[0])==null?void 0:s.date.substring(0,10)),c.value.push(i.value[$])}await Promise.all(q).then($=>{C.value=$}),oe(),F()}catch(t){console.error("Error fetching data:",t)}};E();const Q=s=>{o.value=s,E()};J(l,(s,t)=>{o.value=0,E()});const F=()=>{U.value=o.value==0,R.value=o.value==0,H.value=o.value==u.value,K.value=o.value==u.value};J(o,(s,t)=>{F()});const N=s=>{let t=parseInt(o.value);s=="first"?t=0:s=="last"?t=u.value:s=="prev"?(t=z()-1,t<0&&(t=0)):(t=z()+10,t>=u.value&&(t=u.value)),Q(t)};function ne(s){j.push({name:"readwiki",params:{id:s}})}const A=n(""),re=()=>{console.log("Selected Category ID:",A.value),A.value===""?c.value=i.value.slice(0,l.value):c.value=i.value.filter(s=>s.category.id===A.value).slice(0,l.value),u.value=Math.ceil(c.value.length/l.value)-1,o.value=0,o.value>u.value&&(o.value=u.value),ie(),F()};return(s,t)=>(d(),le(me,null,{default:b(()=>[e("div",we,[_(_e,{color:""},{default:b(()=>[X("Wiki List")]),_:1})]),Y(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>l.value=a),style:{"margin-left":"10px"}},Ie,512),[[Z,l.value]]),X("  "),Y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>A.value=a),onChange:re},[Ce,(d(!0),p(T,null,W(h.value,(a,f)=>(d(),p("option",{key:f,value:a.category.id},w(a.category.name),9,xe))),128))],544),[[Z,A.value]]),Ae,Be,e("table",Pe,[Te,Le,(d(!0),p(T,null,W(c.value,(a,f)=>(d(),p(T,{key:f},[e("tr",Se,[e("td",Ve,w(a.wikiId),1),e("td",je,[e("button",{type:"button",onClick:G=>ne(a.wikiId),style:{color:"#905dff"}},w(a.wikiTitle),9,Me)]),e("td",ze,[_(ge,{userId:a.userId},null,8,["userId"])]),e("td",Ne,w(C.value[f]),1)]),We],64))),128))]),De,e("div",Ee,[e("ul",Fe,[e("li",{class:B(["page-item",{disabled:r(U)}])},[e("a",{class:"page-link",href:"#",onClick:t[2]||(t[2]=P(a=>N("first"),["prevent"]))},"처음")],2),e("li",{class:B(["page-item",{disabled:r(R)}])},[e("a",{class:"page-link",href:"#",onClick:t[3]||(t[3]=P(a=>N("prev"),["prevent"]))}," < 이전 ")],2),(d(!0),p(T,null,W(x.value,(a,f)=>(d(),p("li",{key:`list-${f}`,class:B(["page-item",{active:a==r(o),bold:a==r(o)}])},[e("a",{class:"page-link",href:"#",onClick:P(G=>Q(a),["prevent"])},w(a+1),9,Ge)],2))),128)),e("li",{class:B(["page-item",{disabled:r(H)}])},[e("a",{class:"page-link",href:"#",onClick:t[4]||(t[4]=P(a=>N("next"),["prevent"]))}," 다음 > ")],2),e("li",{class:B(["page-item",{disabled:r(K)}])},[e("a",{class:"page-link",href:"#",onClick:t[5]||(t[5]=P(a=>N("last"),["prevent"]))},"마지막")],2)])])]),_:1}))}},Ue=ce(Oe,[["__scopeId","data-v-d94231f4"]]),Re={class:"table-image"},He=["src"],Ke=["src"],Qe={class:"table-info"},qe={style:{"margin-left":"5%","font-size":"40px","font-weight":"700"}},Je=e("div",{style:{"margin-bottom":"5%"}},null,-1),Xe={style:{"margin-left":"5%","font-size":"18px","word-wrap":"break-word","white-space":"pre-line"}},Ye=e("div",{class:"bar"},null,-1),Ze={key:1},gt={__name:"other",props:{userId:Number},setup(m){he(),g("serverAddress");const L=g("profileAddress"),D=g("userAddress"),S=g("postAddress"),V=g("auth");ae();const I=m,k=n([]),y=n([]);async function j(){const h=await fetch(`http://${D}/api/read/user/${I.userId}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`},credentials:"include"});h.ok?y.value=await h.json():alert("실패!")}async function C(){const h=await fetch(`http://${S}/api/post/read/user/${I.userId}/1`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`},credentials:"include"});h.ok?k.value=await h.json():alert("실패!")}j(),C(),fe(()=>{j()});const c=n(!0);return(h,i)=>(d(),le(O,null,{default:b(()=>[_(se,{cols:"12",md:"8",class:"mb-4"},{default:b(()=>[_(O,null,{default:b(()=>[e("div",Re,[r(y).profile?(d(),p("img",{key:1,class:"table-propile-img",src:r(L)+r(y).profile.storeFileName},null,8,Ke)):(d(),p("img",{key:0,class:"table-propile-img",src:r(ke)},null,8,He))]),e("div",Qe,[e("div",qe,w(r(y).username),1),Je,e("div",Xe,w(r(y).email),1)])]),_:1}),_(O,{style:{height:"30px","margin-bottom":"20px"}},{default:b(()=>[e("div",{class:"selectPostWiki",onClick:i[0]||(i[0]=l=>c.value=!0)},"POST"),Ye,e("div",{class:"selectPostWiki",onClick:i[1]||(i[1]=l=>c.value=!1)},"WIKI")]),_:1}),r(c)?(d(!0),p(T,{key:0},W(r(k),(l,o)=>(d(),p("div",{key:o},[_(de,{post:l,style:{"margin-bottom":"20px"}},null,8,["post"])]))),128)):ee("",!0),r(c)?ee("",!0):(d(),p("div",Ze,[_(Ue,{userId:I.userId},null,8,["userId"])]))]),_:1}),_(se,{cols:"12",md:"4"})]),_:1}))}};export{gt as default};
