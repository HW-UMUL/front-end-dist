import{a as B}from"./axios-DkDr-_XN.js";import{_ as F,i as p,a7 as H,H as I,aa as k,o as n,c as r,a as o,t as _,u as c,F as f,L,b as N,w as V,N as m,h as R,M as z,Q as D,R as E}from"./index-Csy_03Ik.js";const l=d=>(D("data-v-d66ce2f9"),d=d(),E(),d),U=l(()=>o("hr",null,null,-1)),G=l(()=>o("br",null,null,-1)),Q={width:"100%",style:{color:"gray"}},W=l(()=>o("br",null,null,-1)),Y=["innerHTML"],Z={key:1,style:{"text-align":"center","margin-top":"60px"},class:"hr-sect"},q=["onClick"],J={key:2},K=["innerHTML"],O={key:0,style:{"justify-content":"center",position:"relative",display:"flex"}},P={style:{"text-align":"center","margin-top":"30px"},class:"hr-sect"},X=["onClick"],tt={key:1,style:{"margin-top":"50px"}},et=l(()=>o("hr",null,null,-1)),ot=[et],st=l(()=>o("br",null,null,-1)),nt=l(()=>o("br",null,null,-1)),rt={__name:"viewwikilogs",setup(d){p("serverAddress");const x=p("wikiAddress"),b=p("userAddress"),w=p("auth");async function S(){const e=await fetch(`http://${b}/api/getuserid`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`},credentials:"include"});if(!e.ok)alert("인증에 실패하였습니다.");else return e.json()}let g="Bearer ";g=g+w;const v=H(),T=I(),u=k([]);let s=k([]);const h=k([]);C();async function C(){const e=await S();B.get(`http://${x}/api/wikilog/readall/${v.params.id}/${e}`,{headers:{Authorization:g},withCredentials:!0}).then(i=>{u.value=i.data;for(let t=0;t<u.value.length;t++)s[t]=new Date(u.value[t].date),s[t]=s[t].getFullYear()+"-"+(s[t].getMonth()+1).toString().padStart(2,"0")+"-"+s[t].getDate().toString().padStart(2,"0")+" "+s[t].getHours().toString().padStart(2,"0")+":"+s[t].getMinutes().toString().padStart(2,"0")+":"+s[t].getSeconds().toString().padStart(2,"0")})}const A=()=>{T.go(-1)},M=(e,i)=>{if(e.length<=i)return e;const t=/https?:\/\/(?:[a-zA-Z]|[0-9]|[$-_@.&+]|[!*\\(\\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+/g;return e.substring(0,i).replace(t,"")},$=e=>e.length>200,y=e=>{h[e]=!h[e]};return(e,i)=>(n(),r(f,null,[o("h2",null,_(c(v).params.id)+"번 게시글 변경 이력",1),U,G,(n(!0),r(f,null,L(c(u).value,(t,a)=>(n(),r("div",{key:a,style:{"margin-top":"10px","margin-bottom":"40px"}},[o("div",Q,[o("h1",null,_(t.title),1),o("p",null," "+_(t.title)+"   "+_(c(s)[a])+"에 변경",1)]),W,c(h)[a]?(n(),r("div",{key:0,innerHTML:t==null?void 0:t.content,style:{width:"100%",height:"50%"}},null,8,Y)):R("",!0),c(h)[a]?(n(),r("div",Z,[o("button",{style:{"background-color":"white","border-radius":"20px",width:"90px",height:"41px",border:"2px solid"},onClick:j=>y(a)}," - 접기 ",8,q)])):(n(),r("div",J,[o("div",{innerHTML:M(t==null?void 0:t.content,200)},null,8,K),$(t==null?void 0:t.content)?(n(),r("div",O,[o("div",P,[o("button",{style:{"background-color":"white","border-radius":"20px",width:"90px",height:"41px",border:"2px solid"},onClick:j=>y(a)}," + 더 보기 ",8,X)])])):(n(),r("div",tt,ot))]))]))),128)),st,nt,N(m,{onClick:A},{default:V(()=>[z("뒤로가기")]),_:1})],64))}},ct=F(rt,[["__scopeId","data-v-d66ce2f9"]]);export{ct as default};
